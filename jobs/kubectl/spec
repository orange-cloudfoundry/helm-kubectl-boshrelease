---
name: kubectl

templates:
  bin/run.erb: bin/run
  bin/ingress.rb.erb: bin/ingress.rb

packages: 
- kubectl

properties:
  kubernetes.host:
    description: "The hostname (in form of URI) of Kubernetes master"
    example: "https://cfcr-api.internal.paas"

  kubernetes.username:
    description: "The username to use for HTTP basic authentication when accessing the Kubernetes master endpoint."
    default: "kubo-cluster-admin"

  kubernetes.password:
    description: "The password to use for HTTP basic authentication when accessing the Kubernetes master endpoint."

  kubernetes.client_certificate:
    description: "PEM-encoded client certificate for TLS authentication."

  kubernetes.client_key:
    description: "PEM-encoded client certificate key for TLS authentication."

  kubernetes.cluster_ca_certificate:
    description: "PEM-encoded root certificates bundle for TLS authentication"

  ingress:
    description: "array of ingress rules that need to be apply"
    example: |
      - name: dashboard-ingress
        namespace: kube-system
        spec:
          rules:
          - host: ingress-ops.nd-int-cfapi.itn.intraorange
            http:
              paths:
              - backend:
                  serviceName: kubernetes-dashboard
                  servicePort: 443
                path: /dashboard

      - name: grafana-ingress
        namespace: kube-system
        spec:
          rules:
          - host: ingress-ops.nd-int-cfapi.itn.intraorange
            http:
              paths:
              - backend:
                  serviceName: grafana
                  servicePort: 443
                path: /grafana

    default: []
