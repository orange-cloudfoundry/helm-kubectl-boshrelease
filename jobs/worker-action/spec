---
name: worker-action

templates:
  bin/post-deploy.erb: bin/post-deploy
  bin/pre-stop.erb: bin/pre-stop
  bin/set_env.erb: bin/set_env
  bin/declare_vars.rb.erb: bin/declare_vars.rb
  bin/kubectl_pv.rb: bin/kubectl_pv.rb
  bin/pv.rb: bin/pv.rb
  bin/pv_script.rb: bin/pv_script.rb
  bin/run.erb: bin/run
  bin/uninstall.rb: bin/uninstall.rb
  config/ca_cert.pem.erb: config/ca_cert.pem


packages:
- kubectl
- ruby-2.6.5-r0.29.0
- jq
- action

properties:
  kubernetes.host:
    description: "The hostname (in form of URI) of Kubernetes master"
    example: "cfcr-api.internal.paas"

  kubernetes.port:
    description: "The port of Kubernetes master"
    example: "443"

  kubernetes.config:
    description: "content of .kube/config file, if defined it will be use instead of others parameters"
    default: ""

  kubernetes.config_path:
    description: "use this parameter only if  .kube/config file is already defined in the vm at this path"
    default: ""

  kubernetes.usecontext:
    description: "say witch context use inside .kube/config"
    default: "cfcr"

  kubernetes.password:
    description: "The password to use for HTTP basic authentication when accessing the Kubernetes master endpoint."

  kubernetes.cluster_ca_certificate:
    description: "PEM-encoded root certificates bundle for TLS authentication."

  persistent_volume.storageclass.create:
    description: ""
    default: "false"

  persistent_volume.based_on_label:
    description: "label used to check node name"
    default: "worker"

  persistent_volume.storageclass.name:
    description: ""
    default: "manual_local_pv"

  persistent_volume.pvs:
    default: []
